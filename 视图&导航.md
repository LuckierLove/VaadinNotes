# 添加视图 
## 创建视图
使用 @Route 注解可以实现
@Route 注解 value 属性代表视图视图名 (类似于 URL 路径)
举个例子，下方代码表示的是 `http://BASE_URL/` 所能请求到的视图

```Java
@Route("")
public class HelloWorld extends Div{
	public HelloWorld() {
		setText("Hello World");
	}
}
```
**注意：永远不要以 `/` 作为路径开头**
## 视图命名
当 @Route 注解作用于一个类上时，并且未指定视图名，默认将以类名的小写形式来命名，并且末尾带有 `View` 将会默认去除，以及根视图 `MainView` 将会变成 `""`。
举几个例子：
- `HelloWorld` 将会变成 `helloWorld`
- `ListView` 将会变成 `list`
- `MainView` 将会变成 `""`
## 视图别名
使用 @RouteAlias 注解，并设置其 value 属性，可为视图创建别名
如下例子
```Java
@Route("")  
@RouteAlias("index")  
@RouteAlias("home")  
public class HomeView extends Div {  
}
```
该视图可以通过以下 URL 访问：
- `http://BASE_URL/`
- `http://BASE_URL/index`
- `http://BASE_URL/home`
## 视图页面标题
默认情况下，视图是没有设置页面标题的，可以通过 `声明式页面标题` 和 `动态页面标题` 来设置
### 声明式页面标题
使用 `@PageTitle` 注解可以直接设置视图页面标题
例子如下
```Java
@Route("")  
@PageTitle("主页")  
public class HomeView extends Div {  
}
```
### 动态页面标题
实现视图动态页面标题需要实现 `HasDynamicTtile` 接口
实现 `getPageTile` 方法，在该方法中运行动态页面标题的生成逻辑，并返回标题。
以下例子将动态设置视图页面标题为当前时间
```Java
@Route("")  
public class HomeView extends Div implements HasDynamicTitle {  
    @Override  
    public String getPageTitle() {  
        return LocalDateTime.now().format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"));  
    }  
}
```
**注意 @PageTitle 和接口 HasDynamicTitle 不可同时出现**

## 导航栏菜单项
大多数 Web 应用都会有一个导航栏，Vaadin 可以使用 `MenuConfiguration` 来生成
一个菜单。当你想把一个视图添加到该菜单可以使用 `@Menu` 注解
以下代码展示了一个标题为 `主页`，图标为 `vaadin:academy-cap` 的菜单项
```Java
@Route("")  
@Menu(title = "主页", order = 1, icon = "vaadin:academy-cap")  
public class HomeView extends Div {  
}
```
`@Route` 注解的属性：
- `title` 表示该菜单项的标题
- `order` 用于菜单项的排序
- `icon`  表示该菜单项的图标，可在 [icon](https://vaadin.com/docs/latest/components/icons/default-icons) 查询
## 包命名风格
官方推荐的视图所在包命名风格是 `[功能].ui.view`
如果视图只由一个类所组成，可以将该类直接放在 `view` 包下。
若视图由多个类所组成，应在 `view` 包下创建一个包，并用该视图名命名，并将组成该视图的类放在该包下。

如果并不知道你新创建的视图是大还是小，那么就先放在 `view` 包下，之后可以重构它。
# 导航到视图
Vaadin 当中有 `RouterLink` 和 `UI.navigate()` 两种方法来导航到视图
## RouterLink
`RouterLink` 就像是 `HTML` 当中的 `<a>` 标签
```Java
var link = new RouterLink("Home", HomeView.class);
mainLayout.add(link);
```
上述示例代码创建了一个展示名称为 `Home` 的  `RouterLink `， 并且其能够导航到视图 ` HomeView `
**注意：Vaadin 要求为 JDK 17 版本以上，意味着可以使用关键字 `var` 进行类型推导**

如果目标视图能够接受一个参数，那么你可以把这个参数传给 `RouterLink` 的构造器
举个例子，`UserInfoView` 实现了 `HasUrlParamter<T>` 接口接收一个 `String` 类型的参数作为用户 ID 
```Java
var link = new RouterLink("User Info", UserInfoView.class, "user123");
mainLayout.add(link);
```

## 编程式导航
即使用 `UI.navigate()` 导航到视图。

下面例子创建了一个按钮，并且监听点击事件，当被点击时跳转到 `HomeView`

```Java
var button = new Button("Index");
button.addClickListener(event -> 
	UI.getCurrent().navigate(HomeView.class)
);
```
如果目标视图也接收一个参数那么可以直接传给 `navigate` 方法
例子如下：
```Java
var button = new Button("Get User Info");
button.addClickListener(event -> 
	UI.getCurrent().navigate(UserInfoView.class, "user1234")
);
```

## 封装自己的API
为了避免项目到处充斥着散乱的 `UI.navigate()` 你可以在相应的 `View` 当中封装一个调用 `UI.navigate()` 的方法。

下面例子，在 `UserInfoView` 当中创建了一个 `showUserInfo` 的静态方法用来导航到该视图，避免直接调用 `UI.navigate()`
```Java
@Route("user-info")  
public class UserInfoView extends Main implements HasUrlParameter<String> {  
  
    public static void showUserInfo(String userId) {  
        UI.getCurrent().navigate(UserInfoView.class, userId);  
    }  
	...
}
```
当你想导航到 `UserInfoView` 视图 只需要如下
```Java
var button = new Button("User Info");
button.addClickListener(event -> 
	UserInfoView.showUserInfo("user1234");
);
```
你甚至还可以封装一个返回 `RouterLink` 类型的静态方法来优化你的代码
```Java
public static RouterLink createShowAllUsersInfoLink(){  
    return new RouterLink("Show All Users Info", UserInfoView.class); 
}
```
# 传递数据到视图
Vaadin 传递参数通过 `URL` 参数
## URL 参数类型
- Route 参数，URL 的一部分，一般用来区分视图
- Query 参数，key-value 对，一般用于 `View` 状态存储
## Route 参数
`Route参数` 是 URL 的一部分动态内容，可以传递额外的信息给 `视图`
举个例子，如果一个程序有一个路径 `hello` 且接收一个参数，那么可以用以下 URL 访问该路径：
- `/hello/world`
- `/hello/vaadin`
- `/hello/java`
其中，`"world"`, `"vaadin"`, `"java"` 都是 `Route参数` 且传递给了，`hello` 路径
### Route 参数和静态路径
静态路径优先于动态路径，举个例子，假设一个程序有 `user` 路径（接收一个 `String` 类型的参数）和 `user/list` 路径
- `/user/user1234` -> 访问 `user` 路径，并且传入参数 `user1234`
- `/user/detail` -> 访问 `user` 路径，并且传入参数 `datail`
- `/user/list` -> 访问路径 `user/list`
- `/user` -> 将会出现 `404 Not Found` 错误